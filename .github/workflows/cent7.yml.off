#This try to build centOS 7 RPM package was a flop


name: centos 7 RPM

on: 
  push:
    branches: [feature/test-buildout]

jobs:
    centos-7-build:
        runs-on: ubuntu-16.04

        steps: 
          - name: Checkout repo
            uses: actions/checkout@v2

          - name: Installs
            run: |
              set -x
              sudo apt-get update
              sudo apt-get --yes install libxml2-dev uuid-dev libcurl4-openssl-dev libcppunit-dev gcovr build-essential lintian fakeroot

          - name: Configure
            run: |
              set -x
              autoreconf -i
              ./configure --prefix=$prefix --enable-developer

          - name: Build centos 7 package
            run: |
              set -x
              export LIBDAP_BUILD=centos7
              sudo mkdir -p $prefix/rpmbuild
              #docker run --volume $prefix/rpmbuild:/root/rpmbuild --volume $TRAVIS_BUILD_DIR:/root/travis
              #--env AWS_ACCESS_KEY_ID=$AWS_ACCESS_KEY_ID --env AWS_SECRET_ACCESS_KEY=$AWS_SECRET_ACCESS_KEY
              #--env os=centos7 opendap/centos7_hyrax_builder:1.2 /root/travis/build-rpm.sh

